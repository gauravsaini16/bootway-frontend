"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[316],{2328:(e,t,s)=>{s.d(t,{As:()=>d,HW:()=>E,JJ:()=>p,Os:()=>u,cC:()=>h,kp:()=>T,yw:()=>y});var a=s(9776),n=s(2454),i=s(549),r=s(8979);let o={auth:{current:["auth","current"]},jobs:{all:["jobs"],lists:()=>[...o.jobs.all,"list"],list:e=>[...o.jobs.lists(),e],details:()=>[...o.jobs.all,"detail"],detail:e=>[...o.jobs.details(),e]},applications:{all:["applications"],lists:()=>[...o.applications.all,"list"],list:e=>[...o.applications.lists(),e],details:()=>[...o.applications.all,"detail"],detail:e=>[...o.applications.details(),e],my:()=>[...o.applications.all,"my"],byJob:e=>[...o.applications.all,"job",e]},interviews:{all:["interviews"],lists:()=>[...o.interviews.all,"list"],list:e=>[...o.interviews.lists(),e],details:()=>[...o.interviews.all,"detail"],detail:e=>[...o.interviews.details(),e],my:()=>[...o.interviews.all,"my"]},offers:{all:["offers"],lists:()=>[...o.offers.all,"list"],list:e=>[...o.offers.lists(),e],details:()=>[...o.offers.all,"detail"],detail:e=>[...o.offers.details(),e],my:()=>[...o.offers.all,"my"]},users:{all:["users"],lists:()=>[...o.users.all,"list"],list:e=>[...o.users.lists(),e],details:()=>[...o.users.all,"detail"],detail:e=>[...o.users.details(),e]}},c={staleTime:3e5,gcTime:6e5,retry:(e,t)=>401!==t.status&&403!==t.status&&e<3,retryDelay:e=>Math.min(1e3*2**e,3e4)},l={retry:1,onError:e=>{console.error("Mutation error:",e)}},d=()=>{let e=(0,a.jE)(),t=(0,n.I)({queryKey:o.auth.current,queryFn:()=>r.Kp.auth.getCurrentUser().then(e=>e.data),enabled:r.Kp.auth.isAuthenticated(),...c}),s=(0,i.n)({mutationFn:e=>{let{email:t,password:s}=e;return r.Kp.auth.login(t,s)},onSuccess:()=>{e.invalidateQueries({queryKey:o.auth.current})},...l}),d=(0,i.n)({mutationFn:e=>r.Kp.auth.register(e),onSuccess:()=>{e.invalidateQueries({queryKey:o.auth.current})},...l}),u=(0,i.n)({mutationFn:e=>r.Kp.auth.updatePassword(e),...l});return{user:t.data,isLoading:t.isLoading,error:t.error,isAuthenticated:!!t.data,login:s.mutateAsync,loginLoading:s.isPending,register:d.mutateAsync,registerLoading:d.isPending,updatePassword:u.mutateAsync,updatePasswordLoading:u.isPending,logout:()=>{r.Kp.auth.logout(),e.setQueryData(o.auth.current,null),e.clear()}}},u=(e,t)=>(0,n.I)({queryKey:o.jobs.list(e||{}),queryFn:()=>r.Kp.jobs.getJobs(e).then(e=>e.data),...c,...t}),p=(e,t)=>(0,n.I)({queryKey:o.jobs.detail(e),queryFn:()=>r.Kp.jobs.getJobById(e).then(e=>e.data),enabled:!!e,...c,...t}),E=(e,t)=>(0,n.I)({queryKey:o.applications.list(e||{}),queryFn:()=>r.Kp.applications.getApplications(e).then(e=>e.data),...c,...t}),h=()=>{let e=(0,a.jE)();return(0,i.n)({mutationFn:e=>r.Kp.applications.applyForJob(e),onSuccess:()=>{e.invalidateQueries({queryKey:o.applications.lists()}),e.invalidateQueries({queryKey:o.applications.my()}),e.invalidateQueries({queryKey:o.jobs.lists()})},...l})},y=(e,t)=>(0,n.I)({queryKey:o.interviews.list(e||{}),queryFn:()=>r.Kp.interviews.getInterviews(e).then(e=>e.data),...c,...t}),T=(e,t)=>(0,n.I)({queryKey:o.users.list(e||{}),queryFn:()=>r.Kp.users.getAllUsers(e).then(e=>e.data),...c,...t})},4269:(e,t,s)=>{s.d(t,{cn:()=>i});var a=s(2821),n=s(5889);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.QP)((0,a.$)(t))}},8979:(e,t,s)=>{s.d(t,{Kp:()=>y,Ds:()=>h});var a=s(3649);let n={BASE_URL:"http://localhost:5000/api",API_ENDPOINT:"",TIMEOUT:3e4},i="".concat(n.BASE_URL).concat(n.API_ENDPOINT),r={AUTH:{REGISTER:"/auth/register",LOGIN:"/auth/login",ME:"/auth/me",UPDATE_PASSWORD:"/auth/updatePassword"},JOBS:{LIST:"/jobs",DETAIL:e=>"/jobs/".concat(e),CREATE:"/jobs",UPDATE:e=>"/jobs/".concat(e),DELETE:e=>"/jobs/".concat(e),TOGGLE_STATUS:e=>"/jobs/".concat(e,"/toggle")},APPLICATIONS:{LIST:"/applications",DETAIL:e=>"/applications/".concat(e),CREATE:"/applications",UPDATE:e=>"/applications/".concat(e),DELETE:e=>"/applications/".concat(e),BY_JOB:e=>"/applications/job/".concat(e),MY_APPLICATIONS:"/applications/candidate/my-applications"},INTERVIEWS:{LIST:"/interviews",DETAIL:e=>"/interviews/".concat(e),CREATE:"/interviews",UPDATE:e=>"/interviews/".concat(e),DELETE:e=>"/interviews/".concat(e),MY_INTERVIEWS:"/interviews/candidate/my-interviews"},OFFERS:{LIST:"/offers",DETAIL:e=>"/offers/".concat(e),CREATE:"/offers",UPDATE:e=>"/offers/".concat(e),DELETE:e=>"/offers/".concat(e),MY_OFFERS:"/offers/candidate/my-offers"},USERS:{LIST:"/users",DETAIL:e=>"/users/".concat(e),CREATE:"/users",UPDATE:e=>"/users/".concat(e),DELETE:e=>"/users/".concat(e)},HEALTH:"/health"},o={INTERNAL_SERVER_ERROR:500};class c extends Error{constructor(e,t,s,n){super(e),(0,a._)(this,"status",void 0),(0,a._)(this,"code",void 0),(0,a._)(this,"data",void 0),this.status=t,this.code=s,this.data=n,this.name="APIError"}}let l={getToken:()=>localStorage.getItem("token"),setToken(e){localStorage.setItem("token",e)},removeToken(){localStorage.removeItem("token")},isAuthenticated(){return!!this.getToken()},getTokenPayload(){let e=this.getToken();if(!e)return null;try{let t=e.split(".")[1];return JSON.parse(atob(t))}catch(e){return null}},isTokenExpired(){let e=this.getTokenPayload();return!e||1e3*e.exp<Date.now()}};class d{method(e){return this.options.method=e,this}body(e){return this.options.body=JSON.stringify(e),this}headers(e){return this.options.headers={...this.options.headers,...e},this}query(e){return this.params={...this.params,...e},this}auth(e){let t=e||l.getToken();return t&&(this.options.headers={...this.options.headers,Authorization:"Bearer ".concat(t)}),this}build(){let e=new URLSearchParams(Object.entries(this.params).reduce((e,t)=>{let[s,a]=t;return null!=a&&""!==a&&(e[s]=String(a)),e},{})).toString();return{url:e?"".concat(this.url,"?").concat(e):this.url,options:{...this.options,headers:{"Content-Type":"application/json",...this.options.headers}}}}constructor(e){(0,a._)(this,"url",void 0),(0,a._)(this,"options",{}),(0,a._)(this,"params",{}),this.url=e}}class u{async request(e,t){let s=new d("".concat(this.baseURL).concat(e));(null==t?void 0:t.method)&&s.method(t.method),(null==t?void 0:t.body)&&s.body(t.body),(null==t?void 0:t.headers)&&s.headers(t.headers),(null==t?void 0:t.params)&&s.query(t.params),s.auth();let{url:a,options:i}=s.build();try{let e;console.log("\uD83C\uDF10 API Request: ".concat(i.method," ").concat(a));let t=await fetch(a,{...i,signal:AbortSignal.timeout(n.TIMEOUT)}),s=await t.text();try{e=JSON.parse(s)}catch(t){e={success:!1,message:"Invalid JSON response from server"}}if(!t.ok)throw new c(e.message||"HTTP ".concat(t.status),t.status,e.code,e);return console.log("✅ API Response: ".concat(t.status),e),e}catch(e){if(console.error("❌ API Error:",e),e instanceof c)throw e;if(e instanceof Error){if("AbortError"===e.name)throw new c("Request timeout",o.INTERNAL_SERVER_ERROR,"TIMEOUT");throw new c(e.message,o.INTERNAL_SERVER_ERROR,"NETWORK_ERROR")}throw new c("Unknown error occurred",o.INTERNAL_SERVER_ERROR,"UNKNOWN")}}async get(e,t){return this.request(e,{method:"GET",params:t})}async post(e,t){return this.request(e,{method:"POST",body:t})}async put(e,t){return this.request(e,{method:"PUT",body:t})}async patch(e,t){return this.request(e,{method:"PATCH",body:t})}async delete(e){return this.request(e,{method:"DELETE"})}async healthCheck(){return this.get(r.HEALTH)}constructor(e=i){(0,a._)(this,"baseURL",void 0),this.baseURL=e}}let p=new u,E={get:(e,t)=>p.get(e,t),post:(e,t)=>p.post(e,t),put:(e,t)=>p.put(e,t),patch:(e,t)=>p.patch(e,t),delete:e=>p.delete(e),health:()=>p.healthCheck()},h=e=>!!e&&("admin"===e.role||"hr"===e.role),y={auth:{async register(e){let t=await E.post(r.AUTH.REGISTER,e);return t.success&&t.token&&l.setToken(t.token),t},async login(e,t){let s=await E.post(r.AUTH.LOGIN,{email:e,password:t});return s.success&&s.token&&l.setToken(s.token),s},getCurrentUser:async()=>E.get(r.AUTH.ME),updatePassword:async e=>E.put(r.AUTH.UPDATE_PASSWORD,e),logout(){l.removeToken()},isAuthenticated:()=>l.isAuthenticated()&&!l.isTokenExpired()},jobs:{getJobs:async e=>E.get(r.JOBS.LIST,e),getJobById:async e=>E.get(r.JOBS.DETAIL(e)),createJob:async e=>E.post(r.JOBS.CREATE,e),updateJob:async(e,t)=>E.put(r.JOBS.UPDATE(e),t),deleteJob:async e=>E.delete(r.JOBS.DELETE(e)),toggleJobStatus:async e=>E.patch(r.JOBS.TOGGLE_STATUS(e))},applications:{getApplications:async e=>E.get(r.APPLICATIONS.LIST,e),getApplicationById:async e=>E.get(r.APPLICATIONS.DETAIL(e)),async applyForJob(e){let t,s=new FormData;for(let[t,a]of(s.append("jobId",e.jobId),s.append("candidateName",e.candidateName),s.append("candidateEmail",e.candidateEmail),e.candidatePhone&&s.append("candidatePhone",e.candidatePhone),e.coverLetter&&s.append("coverLetter",e.coverLetter),e.resume&&s.append("resume",e.resume),console.log("\uD83D\uDCE4 FormData contents being sent:"),s.entries()))console.log("  ".concat(t,":"),a instanceof File?"File(".concat(a.name,", ").concat(a.size," bytes, ").concat(a.type,")"):a);let a=await fetch("".concat(n.BASE_URL).concat(r.APPLICATIONS.CREATE),{method:"POST",body:s}),i=await a.text();try{t=JSON.parse(i)}catch(e){t={success:!1,message:"Invalid JSON response from server",data:{_id:"",jobId:"",candidateId:null,candidateName:"",candidateEmail:"",candidatePhone:"",resume:"",coverLetter:"",status:"applied",appliedAt:new Date().toISOString(),reviewedAt:void 0,reviewedBy:void 0,notes:void 0,rating:void 0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}}if(!a.ok)throw Error(t.message||"Unknown API error");return t.success&&!t.data&&(t.data={_id:"",jobId:"",candidateId:null,candidateName:"",candidateEmail:"",candidatePhone:"",resume:"",coverLetter:"",status:"applied",appliedAt:new Date().toISOString(),reviewedAt:void 0,reviewedBy:void 0,notes:void 0,rating:void 0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),t},updateApplication:async(e,t)=>E.put(r.APPLICATIONS.UPDATE(e),t),deleteApplication:async e=>E.delete(r.APPLICATIONS.DELETE(e)),getJobApplications:async e=>E.get(r.APPLICATIONS.BY_JOB(e)),getMyApplications:async()=>E.get(r.APPLICATIONS.MY_APPLICATIONS)},interviews:{getInterviews:async e=>E.get(r.INTERVIEWS.LIST,e),getInterviewById:async e=>E.get(r.INTERVIEWS.DETAIL(e)),scheduleInterview:async e=>E.post(r.INTERVIEWS.CREATE,e),updateInterview:async(e,t)=>E.put(r.INTERVIEWS.UPDATE(e),t),deleteInterview:async e=>E.delete(r.INTERVIEWS.DELETE(e)),getMyInterviews:async()=>E.get(r.INTERVIEWS.MY_INTERVIEWS)},offers:{getOffers:async e=>E.get(r.OFFERS.LIST,e),getOfferById:async e=>E.get(r.OFFERS.DETAIL(e)),createOffer:async e=>E.post(r.OFFERS.CREATE,e),updateOffer:async(e,t)=>E.put(r.OFFERS.UPDATE(e),t),deleteOffer:async e=>E.delete(r.OFFERS.DELETE(e)),getMyOffers:async()=>E.get(r.OFFERS.MY_OFFERS)},users:{getAllUsers:async e=>E.get(r.USERS.LIST,e),getUserById:async e=>E.get(r.USERS.DETAIL(e)),createUser:async e=>E.post(r.USERS.CREATE,e),updateUser:async(e,t)=>E.put(r.USERS.UPDATE(e),t),deleteUser:async e=>E.delete(r.USERS.DELETE(e))},system:{healthCheck:async()=>E.health()}}}}]);